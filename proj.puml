@startuml

Abstract class Tile {
	-Area currentArea
	+moveTo(Area area)
}


Tile <|-- SpecialTile
abstract class SpecialTile {
	+effect()
}

Tile <|-- ColoredTile
class ColoredTile {
	-Colors color
	+Colors getColor()
}

SpecialTile <|-- FirstTile
class FirstTile

Colors --* ColoredTile : "intern enum"
enum Colors {
	BLUE
	RED
	GREEN
	BLACK
	YELLOW	
}


interface Area {
	+void addTile(Tile tile)
	+Tile removeTile(Tile tile)
	+int size()
	+boolean isEmpty()
}

Area <|.. OffSideArea
abstract class OffSideArea {
	-ArrayList<Tile> tiles
}

OffSideArea <|-- Bag
class Bag {
	+void refill(Trash trash)
}

OffSideArea <|-- Trash
class Trash {
	
}

Area <|.. CommonArea
abstract class CommonArea
CommonArea <|-- CenterArea
CommonArea <|-- Factories
class Factories {
	+ArrayList<Tile> createTiles(Bag bag)
}

Area <|.. PlayerArea
abstract class PlayerArea

PlayerArea <|-- Wall
class Wall {
	-Tile[][] tiles
}

PlayerArea <|-- Floor
class Floor {
	-Tile[] tiles
}

PlayerArea <|-- PatternArea
class PatternArea{
	-Tile[][] tiles
}

abstract class Player {
	Stat stats
}

Stat  --* Player : "intern class"
class Stat {
	int totalScore
	int[] perRoundScore
	String name
	boolean isHuman
}

Player <|-- HumanPlayer
Player <|-- AIPlayer


class PlayerBoard
PlayerBoard --* Player : "intern class"


GameConfiguration -left-* Game : "intern class"
class GameConfiguration {
	-int nbOfPlayers	
	-AIDifficulty
	+void saveTo(File f)
	+void loadFrom(File f)
}

Game --> Round : "observes"
class Game {
	-GameConfiguration config
	-ArrayList<Player> players
	-GameBoard board
	-LinkedList<Round> rounds
	-Round currentRound
	-Player winner
	-void loadConfig(GameConfiguration config)
	+void init(GameConfiguration config)
	+void play()
	+void shutdown()
}

Game --> GameBoard : "init"
GameBoard --* Game : "intern class"
class GameBoard {
	-ArrayList<PlayerBoard> playerBoards
	-Bag bag
	-Trash trash
	-Factories factories
	-CenterArea center
	+init(GameConfiguration config)
}
	
Round --> PlayerBoard : "observes"
class PlayerBoard {
	-Wall playerWall
	-Floor playerFloor
	-PatternArea playerPatternArea
}

class Round {	
	-LinkedList<Player> players
	+preparationPhase()
	+offerPhase()
	+decorationPhase()	
}


App --> Game : "calls"
class App {
	+void main(String[] args)
}


@enduml
